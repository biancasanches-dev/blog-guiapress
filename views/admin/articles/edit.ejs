
<%- include ('../../partials/header.ejs') %> <%- include
('../../partials/navbar.ejs') %>

<div class="container">
  <hr />
  <div class="card">
    <div class="card-header">
      <h2>Editar artigo</h2>
    </div>
    <div class="card-body">
        <h3>Título</h3>
        <form method="POST" action="/admin/articles/update">
        <input
          class="form-control"
          type="text"
          name="title"
          placeholder="Defina o novo título do artigo"
          value="<%= article.title%>"
        />
        <input type="hidden" name="id" value="<%= article.id %>" />
        <hr>
        <textarea class="form-control" placeholder="Escreva o artigo aqui" name="body" id="article"><%= article.body%></textarea><br>
        <br>
        <label>Categoria</label>
        <select name="category" class="form-control">
            <% categories.forEach((category) => { %>
                <% if(category.id == article.categoryId) { %>
                    <option value="<%= category.id %>" selected><%= category.title %></option>
                <% } else { %>
                    <option value="<%= category.id %>"><%= category.title %></option>
                <% } %>    
            <% }) %>
        </select>
        <br>
        <button class="btn btn-success">Atualizar</button>
      </form>
    </div>
  </div>
</div>

<%- include ('../../partials/footer.ejs') %>

<script src="/tinymce/tinymce.min.js"></script>
<script>

    tinymce.init({
        language: 'pt_BR',
        selector: "#article",
        plugins: [
            'advlist', 'autolink', 'link', 'image', 'lists', 'print', 'preview', 'hr', 'searchreplace', 'wordcount', 'fullscreen', 'insertdatetime', 'media', 'save', 'table', 'paste', 'emoticons'
        ],
        
        
    });

</script>
